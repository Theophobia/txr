package me.theophobia.shtipsbackend.user;

import jakarta.persistence.*;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.util.Base64;

@Entity
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public final class UserAvatar {

	private static final String DEFAULT_IMAGE = "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";

	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private Long id;

	@OneToOne
	@JoinColumn(name = "user_id")
	private User user;

	@Column(columnDefinition = "bytea")
	private byte[] imageData;

	@Column(columnDefinition = "bytea")
	private byte[] imageData36;

	@PrePersist
	@PreUpdate
	private void setDefaultValues() {
		if (imageData == null) {
			try {
				ByteArrayInputStream bais = new ByteArrayInputStream(Base64.getDecoder().decode(DEFAULT_IMAGE));
				BufferedImage image = ImageIO.read(bais);
				setImage(image);
			}
			catch (Exception ignored) {

			}
		}
	}

	public void setImage(BufferedImage image) {
		try {
			ByteArrayOutputStream baos = new ByteArrayOutputStream();
			ImageIO.write(image, "jpg", baos);
			byte[] imageBytes = baos.toByteArray();

			setImageData(imageBytes);
		}
		catch (Exception ignored) {

		}

		try {
			ByteArrayOutputStream baos = new ByteArrayOutputStream();
			ImageIO.write(resize(image, 36, 36), "png", baos);
			byte[] imageBytes = baos.toByteArray();

			setImageData36(imageBytes);
		}
		catch (Exception ignored) {

		}
	}

	private static BufferedImage resize(BufferedImage originalImage, int newWidth, int newHeight) {
		// Create a new BufferedImage with the desired size
		BufferedImage resizedImage = new BufferedImage(newWidth, newHeight, originalImage.getType());

		// Get the Graphics2D object to draw the resized image
		Graphics2D g2d = resizedImage.createGraphics();

		// Draw the original image onto the resized image
		g2d.drawImage(originalImage.getScaledInstance(newWidth, newHeight, Image.SCALE_SMOOTH), 0, 0, null);

		// Dispose of the Graphics2D object
		g2d.dispose();

		return resizedImage;
	}
}
